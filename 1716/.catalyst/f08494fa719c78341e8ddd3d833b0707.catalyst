{"title":{"en":"B. Permutation Chain","ru":"B. Цепочка перестановок"},"contestId":"1716","problemIndex":"B","timeLimit":{"en":"2 seconds","ru":"2 секунды"},"memLimit":{"en":"256 megabytes","ru":"256 мегабайт"},"inputFormat":{"en":"standard input","ru":"стандартный ввод"},"outputFormat":{"en":"standard output","ru":"стандартный вывод"},"problemHtml":{"en":"<p>A permutation of length $$$n$$$ is a sequence of integers from $$$1$$$ to $$$n$$$ such that each integer appears in it exactly once.</p><p>Let the fixedness of a permutation $$$p$$$ be the number of fixed points in it&nbsp;— the number of positions $$$j$$$ such that $$$p_j = j$$$, where $$$p_j$$$ is the $$$j$$$-th element of the permutation $$$p$$$.</p><p>You are asked to build a sequence of permutations $$$a_1, a_2, \\dots$$$, starting from the identity permutation (permutation $$$a_1 = [1, 2, \\dots, n]$$$). Let's call it a permutation chain. Thus, $$$a_i$$$ is the $$$i$$$-th permutation of length $$$n$$$.</p><p>For every $$$i$$$ from $$$2$$$ onwards, the permutation $$$a_i$$$ should be obtained from the permutation $$$a_{i-1}$$$ by swapping any two elements in it (not necessarily neighboring). The fixedness of the permutation $$$a_i$$$ should be strictly lower than the fixedness of the permutation $$$a_{i-1}$$$.</p><p>Consider some chains for $$$n = 3$$$:</p><ul> <li> $$$a_1 = [1, 2, 3]$$$, $$$a_2 = [1, 3, 2]$$$&nbsp;— that is a valid chain of length $$$2$$$. From $$$a_1$$$ to $$$a_2$$$, the elements on positions $$$2$$$ and $$$3$$$ get swapped, the fixedness decrease from $$$3$$$ to $$$1$$$. </li><li> $$$a_1 = [2, 1, 3]$$$, $$$a_2 = [3, 1, 2]$$$&nbsp;— that is not a valid chain. The first permutation should always be $$$[1, 2, 3]$$$ for $$$n = 3$$$. </li><li> $$$a_1 = [1, 2, 3]$$$, $$$a_2 = [1, 3, 2]$$$, $$$a_3 = [1, 2, 3]$$$&nbsp;— that is not a valid chain. From $$$a_2$$$ to $$$a_3$$$, the elements on positions $$$2$$$ and $$$3$$$ get swapped but the fixedness increase from $$$1$$$ to $$$3$$$. </li><li> $$$a_1 = [1, 2, 3]$$$, $$$a_2 = [3, 2, 1]$$$, $$$a_3 = [3, 1, 2]$$$&nbsp;— that is a valid chain of length $$$3$$$. From $$$a_1$$$ to $$$a_2$$$, the elements on positions $$$1$$$ and $$$3$$$ get swapped, the fixedness decrease from $$$3$$$ to $$$1$$$. From $$$a_2$$$ to $$$a_3$$$, the elements on positions $$$2$$$ and $$$3$$$ get swapped, the fixedness decrease from $$$1$$$ to $$$0$$$. </li></ul><p>Find the longest permutation chain. If there are multiple longest answers, print any of them.</p>","ru":"<p>Перестановка длины $$$n$$$&nbsp;— это последовательность целых чисел от $$$1$$$ до $$$n$$$ такая, что каждое число встречается в ней ровно один раз.</p><p>Назовем неподвижностью перестановки $$$p$$$ количество неподвижных точек в ней&nbsp;— количество позиций $$$j$$$ таких, что $$$p_j = j$$$, где $$$p_j$$$ — $$$j$$$-й элемент перестановки $$$p$$$.</p><p>От вас требуется построить последовательность перестановок $$$a_1, a_2, \\dots$$$, начав с тождественной перестановки (перестановки $$$a_1 = [1, 2, \\dots, n]$$$). Назовем это цепочкой перестановок. Таким образом, каждое $$$a_i$$$ — $$$i$$$-я перестановка длины $$$n$$$.</p><p>Для каждого $$$i$$$ от $$$2$$$ и дальше перестановка $$$a_i$$$ должна быть получена из перестановки $$$a_{i-1}$$$ обменом двух элементов местами (не обязательно соседних). Неподвижность перестановки $$$a_i$$$ должна быть строго меньше неподвижности перестановки $$$a_{i-1}$$$.</p><p>Рассмотрим некоторые цепочки для $$$n = 3$$$:</p><ul> <li> $$$a_1 = [1, 2, 3]$$$, $$$a_2 = [1, 3, 2]$$$&nbsp;— это валидная цепочка длины $$$2$$$. От $$$a_1$$$ к $$$a_2$$$ элементы на позициях $$$2$$$ и $$$3$$$ меняются местами, неподвижность уменьшается с $$$3$$$ до $$$1$$$. </li><li> $$$a_1 = [2, 1, 3]$$$, $$$a_2 = [3, 1, 2]$$$&nbsp;— это не валидная цепочка. Первая перестановка всегда должна быть $$$[1, 2, 3]$$$ для $$$n = 3$$$. </li><li> $$$a_1 = [1, 2, 3]$$$, $$$a_2 = [1, 3, 2]$$$, $$$a_3 = [1, 2, 3]$$$&nbsp;— это не валидная цепочка. От $$$a_2$$$ к $$$a_3$$$ элементы на позициях $$$2$$$ и $$$3$$$ меняются местами, но неподвижность увеличивается с $$$1$$$ до $$$3$$$. </li><li> $$$a_1 = [1, 2, 3]$$$, $$$a_2 = [3, 2, 1]$$$, $$$a_3 = [3, 1, 2]$$$&nbsp;— это валидная цепочка длины $$$3$$$. От $$$a_1$$$ к $$$a_2$$$ элементы на позициях $$$1$$$ и $$$3$$$ меняются местами, неподвижность уменьшается с $$$3$$$ до $$$1$$$. От $$$a_2$$$ к $$$a_3$$$ элементы на позициях $$$2$$$ и $$$3$$$ меняются местами, неподвижность уменьшается с $$$1$$$ до $$$0$$$. </li></ul><p>Найдите самую длинную цепочку перестановок. Если есть несколько самых длинных ответов, то выведите любой из них.</p>"},"inSpecsHtml":{"en":"<div class=\"section-title\">Input</div><p>The first line contains a single integer $$$t$$$ ($$$1 \\le t \\le 99$$$)&nbsp;— the number of testcases.</p><p>The only line of each testcase contains a single integer $$$n$$$ ($$$2 \\le n \\le 100$$$)&nbsp;— the required length of permutations in the chain.</p>","ru":"<div class=\"section-title\">Входные данные</div><p>В первой строке записано одно целое число $$$t$$$ ($$$1 \\le t \\le 99$$$)&nbsp;— количество наборов входных данных.</p><p>В единственной строке каждого набора входных данных записано одно целое число $$$n$$$ ($$$2 \\le n \\le 100$$$)&nbsp;— необходимая длина перестановок в цепочке.</p>"},"outSpecsHtml":{"en":"<div class=\"section-title\">Output</div><p>For each testcase, first, print the length of a permutation chain $$$k$$$.</p><p>Then print $$$k$$$ permutations $$$a_1, a_2, \\dots, a_k$$$. $$$a_1$$$ should be an identity permutation of length $$$n$$$ ($$$[1, 2, \\dots, n]$$$). For each $$$i$$$ from $$$2$$$ to $$$k$$$, $$$a_i$$$ should be obtained by swapping two elements in $$$a_{i-1}$$$. It should also have a strictly lower fixedness than $$$a_{i-1}$$$.</p>","ru":"<div class=\"section-title\">Выходные данные</div><p>На каждый набор входных данных сначала выведите длину цепочки перестановок $$$k$$$.</p><p>Затем выведите $$$k$$$ перестановок $$$a_1, a_2, \\dots, a_k$$$. $$$a_1$$$ должна быть тождественной перестановкой длины $$$n$$$ ($$$[1, 2, \\dots, n]$$$). Для каждого $$$i$$$ от $$$2$$$ до $$$k$$$, $$$a_i$$$ должно быть получено обменом двух элементов в $$$a_{i-1}$$$ местами и должно иметь строго меньшее значение, чем $$$a_{i-1}$$$.</p>"},"noteHtml":{"en":null,"ru":null},"sampleTestcases":[{"id":1659625530076,"input":"2\n2\n3\n","output":"2\n1 2\n2 1\n3\n1 2 3\n3 2 1\n3 1 2\n","result":{"id":1659625530076,"stdout":"2\n1 2\n2 1\n3\n1 2 3\n2 1 3\n2 3 1\n","stderr":"","exitcode":0,"signal":null,"time":41,"timeout":false}}],"submitUrl":"https://codeforces.com/contest/1716/submit","language":"python"}